"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[973],{973:(Ae,k,c)=>{c.r(k),c.d(k,{D12ModuleModule:()=>Te});var g=c(1083),v=c(9808),f=c(6773),r=c(9037),p=c(5698),e=c(5e3),S=c(4004),J=c(2340),B=c(520);let T=(()=>{class n{constructor(t){this.client=t,this.urlApi=J.N.apiUrl}getgetMyDiscipleships(t=1,a=10){return this.client.get(`${this.urlApi}/d-12/get-my-discipleships?page=${t}&limit=${a}`,{headers:{hideLoader:"true"}}).pipe((0,S.U)(i=>(i.data=i.data.map(s=>{var d;return Object.assign(Object.assign({},s),{dayMeeting:null===(d=r.Z.FILLSELECTS.dayOfWeek.find(u=>u.value===s.dayMeeting))||void 0===d?void 0:d.viewValue})}),i)))}getgetMyAssigment(t,a=1,i=15){return this.client.get(`${this.urlApi}/d-12/list-my-assigment/${t}?page=${a}&limit=${i}`,{headers:{hideLoader:"true"}}).pipe((0,S.U)(s=>(s.data=s.data.map(d=>Object.assign(Object.assign({},d),{cellRender:"deleteItem"})),s)))}createAssigment(t,a){return this.client.post(`${this.urlApi}/d-12/create-assigment`,t,a)}getgetMyAttendance(t=1,a=15){return this.client.get(`${this.urlApi}/d-12/my-discipleships-attendance?page=${t}&limit=${a}`,{headers:{hideLoader:"true"}}).pipe((0,S.U)(i=>(i.data=i.data.map(s=>{var d,u,m;return Object.assign(Object.assign({},s),{typeDiscipleship:null===(d=r.Z.FILLSELECTS.typeDiscipleships.find(b=>b.value===s.typeDiscipleship))||void 0===d?void 0:d.viewValue,meetingFrequency:null===(u=r.Z.FILLSELECTS.typeMeetingFrequency.find(b=>b.value===s.meetingFrequency))||void 0===u?void 0:u.viewValue,dayMeeting:null===(m=r.Z.FILLSELECTS.dayOfWeek.find(b=>b.value===s.dayMeeting))||void 0===m?void 0:m.viewValue,hourMeeting:s.hourMeeting+" Hrs."})}),i)))}getgetListMyAttendance(t,a=1,i=15){return this.client.get(`${this.urlApi}/d-12/list-my-attendance/${t}?page=${a}&limit=${i}`,{headers:{hideLoader:"true"}}).pipe((0,S.U)(s=>(s.data=s.data.map(d=>Object.assign(Object.assign({},d),{cellRenderAattendItem:!1})),s)))}saveAttendance(t,a){return this.client.post(`${this.urlApi}/d-12/register-attendance`,t,a)}getMeetings(t=1,a=15,i){return this.client.get(`${this.urlApi}/d-12/my-meetings/${i}?page=${t}&limit=${a}`,{headers:{hideLoader:"true"}})}getHistoryMeeting(t=1,a=15,i){let s=`${this.urlApi}/d-12/history-meetings?page=${t}&limit=${a}`;return i&&(s+=`&filters=${JSON.stringify(i)}`),this.client.get(s,{headers:{hideLoader:"true"}})}reporter(t,a){return this.client.post(`${this.urlApi}/reporting`,t,a)}getDataDiscipleship(t){return this.client.get(`${this.urlApi}/d-12/data-discipleship/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(B.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var A=c(6324),M=c(9541),_=c(4437);let Q=(()=>{class n{constructor(t,a,i,s){this.d12Srvc=t,this.route=a,this.notification=i,this.dataTableSrvc=s,this.dataTable={data:[],header:["C\xf3digo","Nombre","D\xeda de reuni\xf3n"],next:null,previous:null,count:0,pages:0,limit:10,actualPage:1,isLoadingResults:!1}}ngOnInit(){this.getData(),this.dataTableSrvc.paginationTrigger.subscribe(t=>{switch(t.action){case r.Z.COMMON.NEXTPAGE:this.nextPage();break;case r.Z.COMMON.PREVPAGE:this.prevPage();break;case r.Z.COMMON.GETITEM:this.route.navigate(["/","d-12","register-assigment",t.id],{state:{nameDiscipleship:t.item.name}})}})}nextPage(){this.dataTable.actualPage&&this.dataTable.pages&&this.dataTable.actualPage<this.dataTable.pages&&(this.dataTable.actualPage=this.dataTable.actualPage+1,this.getData(this.dataTable.actualPage))}prevPage(){this.dataTable.actualPage&&(this.dataTable.actualPage=this.dataTable.actualPage-1==0?1:this.dataTable.actualPage-1,this.getData(this.dataTable.actualPage))}getData(t,a){this.d12Srvc.getgetMyDiscipleships().pipe((0,p.q)(1)).subscribe({next:i=>{this.dataTable.isLoadingResults=!1,this.dataTable.data=i.data,this.dataTable.next=i.next,this.dataTable.previous=i.previous,this.dataTable.pages=i.pages,this.dataTable.count=i.total},error:i=>{this.route.navigate(["/","d-12","my-discipleship"]),this.notification.openSnackBar("A ocurrido un error al obtener los datos","snackbar-danger")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(g.F0),e.Y36(A.c),e.Y36(M.n))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-assigment"]],decls:7,vars:1,consts:[[1,"card-container"],[1,"title-lists"],[1,"buttons-title-table"],[3,"configTable"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Discipulados asigandos"),e.qZA(),e._UZ(4,"div",2),e.qZA(),e.TgZ(5,"div"),e._UZ(6,"app-data-table",3),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("configTable",a.dataTable))},directives:[_.Q],encapsulation:2}),n})();var q=c(4656),D=c(672),L=c(2972);let $=(()=>{class n{constructor(t,a,i,s,d){this.d12Srvc=t,this.route=a,this.notification=i,this.dataTableSrvc=s,this.authService=d,this.dataTable={data:[],header:["C\xf3digo","Nombre","Tipo","Frecuencia","D\xeda","Hora"],next:null,previous:null,count:0,pages:0,limit:10,actualPage:1,isLoadingResults:!1},this.currentUser=this.authService.getUser()}get canViewDiscipleship(){return this.currentUser&&this.currentUser.role.some(t=>t===r.Z.ROLES.ADMIN||t===r.Z.ROLES.REGISTER)||!1}ngOnInit(){this.getData(),this.dataTableSrvc.paginationTrigger.subscribe(t=>{switch(t.action){case r.Z.COMMON.NEXTPAGE:this.nextPage();break;case r.Z.COMMON.PREVPAGE:this.prevPage();break;case r.Z.COMMON.GETITEM:this.route.navigate(["/","d-12","meeting",t.id],{state:{nameDiscipleship:t.item.name}})}})}nextPage(){this.dataTable.actualPage&&this.dataTable.pages&&this.dataTable.actualPage<this.dataTable.pages&&(this.dataTable.actualPage=this.dataTable.actualPage+1,this.getData(this.dataTable.actualPage))}prevPage(){this.dataTable.actualPage&&(this.dataTable.actualPage=this.dataTable.actualPage-1==0?1:this.dataTable.actualPage-1,this.getData(this.dataTable.actualPage))}getData(t,a){this.dataTable.isLoadingResults=!0,this.d12Srvc.getgetMyAttendance(t,a).pipe((0,p.q)(1)).subscribe({next:i=>{this.dataTable.isLoadingResults=!1,this.dataTable.data=i.data,this.dataTable.next=i.next,this.dataTable.previous=i.previous,this.dataTable.pages=i.pages,this.dataTable.count=i.total},error:i=>{this.route.navigate(["/","d-12","my-discipleship-attendence"]),this.notification.openSnackBar("A ocurrido un error al obtener los datos","snackbar-danger")}})}downloadReport(){this.d12Srvc.reporter({actionType:r.Z.TYPE_REPORT.MY_DISCIPLESHIP}).subscribe({next:t=>{t.data&&(0,q.Z)(t.data,`mis-discipulados-${(0,D.y)()}${r.Z.COMMON.EXTENCION_EXCEL}`,r.Z.COMMON.APPLICATION_EXCEL)},error:t=>{console.error(t),this.route.navigateByUrl("/register/my-discipleship-attendence"),this.notification.openSnackBar("A ocurrido un error descargar el reporte, intente m\xe1s tarde","snackbar-danger")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(g.F0),e.Y36(A.c),e.Y36(M.n),e.Y36(L.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-my-discipleship"]],decls:9,vars:2,consts:[[1,"card-container"],[1,"title-lists"],[1,"buttons-title-table"],[1,"btn","btn-primary","m-1",3,"click"],[3,"configTable"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"div",2)(5,"button",3),e.NdJ("click",function(){return a.downloadReport()}),e._uU(6," Descargar "),e.qZA()()(),e.TgZ(7,"div"),e._UZ(8,"app-data-table",4),e.qZA()()),2&t&&(e.xp6(3),e.Oqu(a.canViewDiscipleship?"Discipulados":"Tus discipulados"),e.xp6(5),e.Q6J("configTable",a.dataTable))},directives:[_.Q],encapsulation:2}),n})();var l=c(3075),h=c(1902);let H=(()=>{class n{constructor(t,a,i,s,d){this.d12Srvc=t,this.notification=a,this.dataTableSrvc=i,this.route=s,this.builderForm=d,this.dataTable={data:[],header:["Id reuni\xf3n","C\xf3digo disc.","Discipulado","L\xedder","Tipo","Fecha registrada","Ofrenda","Hora registrada"],next:null,previous:null,count:0,pages:0,limit:10,actualPage:1,isLoadingResults:!1,disabledPointer:!0},this.formFilters=this.builderForm.group({leaderSearch:[""],codeDiscipleshipSearch:[""],initDate:[""],finalDate:[""]})}ngOnInit(){this.getData(),this.dataTableSrvc.paginationTrigger.subscribe(t=>{switch(t.action){case r.Z.COMMON.NEXTPAGE:this.nextPage();break;case r.Z.COMMON.PREVPAGE:this.prevPage()}})}get isValidForm(){var t;const a=[];for(const i in this.formFilters.controls)""!==(null===(t=this.formFilters.get(i))||void 0===t?void 0:t.value)&&a.push(!0);return a.length>0}nextPage(){this.dataTable.actualPage&&this.dataTable.pages&&this.dataTable.actualPage<this.dataTable.pages&&(this.dataTable.actualPage=this.dataTable.actualPage+1,this.getData(this.dataTable.actualPage))}prevPage(){this.dataTable.actualPage&&(this.dataTable.actualPage=this.dataTable.actualPage-1==0?1:this.dataTable.actualPage-1,this.getData(this.dataTable.actualPage))}getData(t,a,i){this.dataTable.isLoadingResults=!0,this.d12Srvc.getHistoryMeeting(t,a,i).pipe((0,p.q)(1)).subscribe({next:s=>{this.dataTable.isLoadingResults=!1,this.dataTable.data=s.data,this.dataTable.next=s.next,this.dataTable.previous=s.previous,this.dataTable.pages=s.pages,this.dataTable.count=s.total},error:s=>{this.route.navigate(["/","d-12","history-meetings"]),this.notification.openSnackBar("A ocurrido un error al obtener los datos","snackbar-danger")}})}downloadReport(){this.d12Srvc.reporter({actionType:r.Z.TYPE_REPORT.HISTORY_MEETINGS,filters:this.formFilters.value}).pipe((0,p.q)(1)).subscribe({next:t=>{t.data&&(0,q.Z)(t.data,`usuarios-${(0,D.y)()}${r.Z.COMMON.EXTENCION_EXCEL}`,r.Z.COMMON.APPLICATION_EXCEL)},error:t=>{this.route.navigateByUrl("/d-12/history-meetings"),this.notification.openSnackBar("A ocurrido un error descargar el reporte, intente m\xe1s tarde","snackbar-danger")}})}onSubmmit(){this.getData(this.dataTable.actualPage,void 0,this.formFilters.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(A.c),e.Y36(M.n),e.Y36(g.F0),e.Y36(l.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-unassisted"]],decls:34,vars:2,consts:[[1,"card-container"],[1,"title-lists"],[1,"buttons-title-table"],[1,"btn","btn-primary","m-1",3,"click"],["errorTailor","",1,"m-1",3,"formGroup"],[1,"form-filter-flex"],[1,"item-form-filter-flex"],[1,"form-group"],["for","codeDiscipleshipSearch",1,"label-form"],["type","text","placeholder","C\xf3digo de discipulado","formControlName","codeDiscipleshipSearch","controlErrorsClass","danger",1,"input-form"],["for","leaderSearch",1,"label-form"],["type","text","placeholder","Nombre del l\xedder","formControlName","leaderSearch","controlErrorsClass","danger",1,"input-form"],["type","date","placeholder","Nombre completo","formControlName","initDate","controlErrorsClass","danger",1,"input-form"],["type","date","placeholder","Nombre completo","formControlName","finalDate","controlErrorsClass","danger",1,"input-form"],[1,"form-group","txt-end"],[1,"btn","btn-primary",3,"click"],[3,"configTable"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Historial de reuniones"),e.qZA(),e.TgZ(4,"div",2)(5,"button",3),e.NdJ("click",function(){return a.downloadReport()}),e._uU(6," Descargar "),e.qZA()()(),e.TgZ(7,"form",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Filtrar por c\xf3digo de discipulado"),e.qZA(),e._UZ(13,"input",9),e.qZA()(),e.TgZ(14,"div",6)(15,"div",7)(16,"label",10),e._uU(17,"Filtrar por l\xedder"),e.qZA(),e._UZ(18,"input",11),e.qZA()(),e.TgZ(19,"div",6)(20,"div",7)(21,"label",10),e._uU(22,"Filtrar fecha inicio"),e.qZA(),e._UZ(23,"input",12),e.qZA()(),e.TgZ(24,"div",6)(25,"div",7)(26,"label",10),e._uU(27,"Filtrar fecha Final"),e.qZA(),e._UZ(28,"input",13),e.qZA()(),e.TgZ(29,"div",14)(30,"button",15),e.NdJ("click",function(){return a.onSubmmit()}),e._uU(31,"Aplicar filtros"),e.qZA()()()(),e.TgZ(32,"div"),e._UZ(33,"app-data-table",16),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("formGroup",a.formFilters),e.xp6(26),e.Q6J("configTable",a.dataTable))},directives:[l._Y,l.JL,h.m6,l.sg,h.kH,l.Fj,l.JJ,l.u,_.Q],encapsulation:2}),n})();var Z=c(1777),I=c(4334),R=c(8966),F=c(4107),P=c(508),O=c(1470),G=c(7446),Y=c(5245),U=c(4834);function w(n,o){if(1&n&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.viewValue," ")}}function V(n,o){if(1&n&&(e.TgZ(0,"div",19)(1,"label",20),e._uU(2,"Seleccionar el lider al que desea registrar su asistencia *"),e.qZA(),e.TgZ(3,"mat-select",21),e.YNc(4,w,2,2,"mat-option",15),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.selectLeaders)}}function j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",6)(2,"h3"),e._uU(3),e.qZA()(),e.TgZ(4,"div",24)(5,"label",25),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"div",26),e._UZ(8,"input",27),e.qZA(),e.TgZ(9,"label",28),e._uU(10,"Tel\xe9fono"),e.qZA(),e.TgZ(11,"div",26),e._UZ(12,"input",29),e.qZA(),e.TgZ(13,"label",30),e._uU(14,"Correo"),e.qZA(),e.TgZ(15,"div",26),e._UZ(16,"input",31),e.qZA(),e.TgZ(17,"label",32),e._uU(18,"Asistio"),e.qZA(),e.TgZ(19,"div",26)(20,"div",33),e._UZ(21,"mat-checkbox",34),e.TgZ(22,"button",35),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(2).onRemoveGuest(s)}),e.TgZ(23,"mat-icon"),e._uU(24,"close"),e.qZA()()()()()()}if(2&n){const t=o.index;e.xp6(3),e.hij("Invitado ",t+1,""),e.xp6(1),e.Q6J("formArrayName",t)}}function X(n,o){if(1&n&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.viewValue," ")}}function z(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"h1"),e._uU(3,"Registrar asistencia"),e.qZA(),e.TgZ(4,"h3",3),e._uU(5),e.qZA()(),e.TgZ(6,"form",4),e.YNc(7,V,5,1,"div",5),e.TgZ(8,"div",6)(9,"h3"),e._uU(10,"Miembros de este discipulado"),e.qZA()(),e.TgZ(11,"div"),e._UZ(12,"app-data-table",7),e.qZA(),e.YNc(13,j,25,2,"div",8),e.TgZ(14,"div",9)(15,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAddGuest()}),e._uU(16,"Agregar invitado(a)"),e.qZA()(),e.TgZ(17,"div",11),e._UZ(18,"mat-divider"),e.qZA(),e.TgZ(19,"div",12)(20,"div",9)(21,"label",13),e._uU(22,"Tipo de reuni\xf3n"),e.qZA(),e.TgZ(23,"mat-select",14),e.YNc(24,X,2,2,"mat-option",15),e.qZA()(),e.TgZ(25,"div",9)(26,"label",16),e._uU(27,"Ofrenda"),e.qZA(),e._UZ(28,"input",17),e.qZA(),e.TgZ(29,"div",9)(30,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmmit()}),e._uU(31,"Registar asistencia"),e.qZA()()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.nameDiscipleship),e.xp6(1),e.Q6J("formGroup",t.formAttendance),e.xp6(1),e.Q6J("ngIf",t.canRegisterAttendance),e.xp6(5),e.Q6J("configTable",t.dataTable),e.xp6(1),e.Q6J("ngForOf",t.guestsForm.controls),e.xp6(11),e.Q6J("ngForOf",t.typeMeeting)}}function W(n,o){if(1&n&&(e.TgZ(0,"div",38)(1,"div",6)(2,"h3"),e._uU(3,"Miembros convertidos"),e.qZA()(),e.TgZ(4,"div",39)(5,"h3",40),e._uU(6),e.qZA()(),e.TgZ(7,"div",41)(8,"div",42)(9,"div",9)(10,"label",43),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"span",44),e._uU(13),e.qZA()(),e.TgZ(14,"div",9)(15,"label",45),e._uU(16,"Fecha de conversi\xf3n"),e.qZA(),e._UZ(17,"input",46),e.qZA()(),e._UZ(18,"mat-divider"),e.qZA()()),2&n){const t=o.$implicit,a=o.index;let i;e.xp6(6),e.hij("Miembro ",a+1,""),e.xp6(1),e.Q6J("formArrayName",a),e.xp6(6),e.hij(" ",null==(i=t.get("name"))?null:i.value," ")}}function K(n,o){if(1&n&&(e.TgZ(0,"div",23)(1,"div",6)(2,"h3"),e._uU(3,"Invitados convertidos"),e.qZA()(),e.TgZ(4,"div",39)(5,"h3",32),e._uU(6),e.qZA()(),e.TgZ(7,"div",41)(8,"div",42)(9,"div",9)(10,"label",47),e._uU(11,"Nombre del invitado"),e.qZA(),e.TgZ(12,"span",44),e._uU(13),e.qZA()(),e.TgZ(14,"div",9)(15,"label",48),e._uU(16,"Fecha de conversi\xf3n"),e.qZA(),e._UZ(17,"input",49),e.qZA()(),e._UZ(18,"mat-divider"),e.qZA()()),2&n){const t=o.$implicit,a=o.index;let i;e.xp6(6),e.hij("Invitado ",a+1,""),e.xp6(1),e.Q6J("formArrayName",a),e.xp6(6),e.hij(" ",null==(i=t.get("nameGuest"))?null:i.value," ")}}function ee(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"h1"),e._uU(3,"Convertidos a cirstos"),e.qZA(),e.TgZ(4,"h3",3),e._uU(5),e.qZA()(),e.TgZ(6,"form",4),e.YNc(7,W,19,3,"div",36),e.YNc(8,K,19,3,"div",8),e.TgZ(9,"div",37)(10,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmmitConvert()}),e._uU(11,"Guardar asistencia"),e.qZA()()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.nameDiscipleship),e.xp6(1),e.Q6J("formGroup",t.formAttendance),e.xp6(1),e.Q6J("ngForOf",t.memberAttended.controls),e.xp6(1),e.Q6J("ngForOf",t.guestsForm.controls)}}let te=(()=>{class n{constructor(t,a,i,s,d,u,m,b){var y,x;this.route=t,this.d12Srvc=a,this.activeRoute=i,this.notification=s,this.dataTableSrvc=d,this.builderForm=u,this.modal=m,this.authService=b,this.idRegister=this.activeRoute.snapshot.params.id,this.typeMeeting=r.Z.FILLSELECTS.typeMeeting,this.converts=!1,this.dataTable={data:[],header:["Nombre","Convertido a C.","Asistio"],next:null,previous:null,count:0,pages:0,limit:15,actualPage:1,isLoadingResults:!1,disabledPointer:!0},this.formAttendance=this.builderForm.group({idDiscipleship:["",l.kI.required],typeMeeting:["",l.kI.required],offering:[],attendance:this.builderForm.array([]),guests:this.builderForm.array([]),dateMeeting:[""],typeDiscipleship:["discipleshipsD12",l.kI.required],idLeader:["",l.kI.required]}),this.selectLeaders=[],this.currentUser=this.authService.getUser(),this.canRegisterAttendance=this.currentUser&&this.currentUser.role.some(E=>E===r.Z.ROLES.ADMIN||E===r.Z.ROLES.REGISTER),this.nameDiscipleship=null===(x=null===(y=this.route.getCurrentNavigation())||void 0===y?void 0:y.extras.state)||void 0===x?void 0:x.nameDiscipleship}get guestsForm(){return this.formAttendance.get("guests")}get memberAttended(){return this.formAttendance.get("attendance")}ngOnInit(){var t;this.idRegister&&(this.getData(this.idRegister),null===(t=this.formAttendance.get("idDiscipleship"))||void 0===t||t.setValue(this.idRegister)),this.d12Srvc.getDataDiscipleship(this.idRegister).pipe((0,p.q)(1)).subscribe({next:a=>{a.leaders&&a.leaders.length>0&&(this.selectLeaders=a.leaders.map(i=>({value:i.id,viewValue:i.name})))},error:a=>{this.notification.openSnackBar("Ha ocurrido un error intente m\xe1s tarde","snackbar-danger"),this.route.navigate(["/","d-12","register-attendance-d12",this.idRegister])}}),this.dataTableSrvc.paginationTrigger.subscribe(a=>{switch(a.action){case r.Z.COMMON.NEXTPAGE:this.nextPage();break;case r.Z.COMMON.PREVPAGE:this.prevPage();break;case r.Z.COMMON.CHANGE_EVENT:this.dataTable.data.forEach(i=>{i.id===a.id&&(this.formAttendance.get("attendance").push(this.builderForm.group({id:[a.id],name:[a.item.name],convertToCrist:[""],attendance:[!0]})),i.cellRenderAattendItem=a.valueChange)})}})}onAddGuest(){this.formAttendance.get("guests").push(this.builderForm.group({nameGuest:["",l.kI.required],phoneGuest:[""],emailGuest:["",l.kI.email],convertToCristGuest:[""],attendenceGuest:[{value:!0,disabled:!0}],typeDiscipleschip:["discipleshipsD12",l.kI.required]}))}onRemoveGuest(t){this.formAttendance.get("guests").removeAt(t)}nextPage(){this.dataTable.actualPage&&this.dataTable.pages&&this.dataTable.actualPage<this.dataTable.pages&&(this.dataTable.actualPage=this.dataTable.actualPage+1,this.getData(this.dataTable.actualPage))}prevPage(){this.dataTable.actualPage&&(this.dataTable.actualPage=this.dataTable.actualPage-1==0?1:this.dataTable.actualPage-1,this.getData(this.dataTable.actualPage))}getData(t,a,i){this.dataTable.isLoadingResults=!0,this.d12Srvc.getgetListMyAttendance(t,a,i).pipe((0,p.q)(1)).subscribe({next:s=>{this.dataTable.isLoadingResults=!1,this.dataTable.data=s.data,this.dataTable.next=s.next,this.dataTable.previous=s.previous,this.dataTable.pages=s.pages,this.dataTable.count=s.total},error:s=>{this.dataTable.isLoadingResults=!1,this.route.navigate(["/","d-12","register-attendance",this.idRegister]),this.notification.openSnackBar("A ocurrido un error al intentar obtener los datos","snackbar-danger")}})}onSubmmit(){var t,a;this.canRegisterAttendance||null===(t=this.formAttendance.get("idLeader"))||void 0===t||t.setValue(null===(a=this.currentUser)||void 0===a?void 0:a.idMember);const i=this.formAttendance.get("attendance"),s=this.formAttendance.get("guests");0===i.length&&0===s.length?this.notification.openSnackBar("Debes seleccionar por lo menos una asitencia","snackbar-warning"):this.formAttendance.valid&&this.modal.open(I.z,{data:{title:"\xbfHubieron convertidos?",body:"Seleccionar una opci\xf3n:",nameButtonCancel:"No hubieron",nameButtonAccpet:"Si hubieron"}}).afterClosed().subscribe(d=>{d?this.converts=d:this.saveData()})}onSubmmitConvert(){const t=this.formAttendance.get("attendance"),a=this.formAttendance.get("guests"),i=t.value.some(d=>""!==d.convertToCrist),s=a.value.some(d=>""!==d.convertToCristGuest);i||s?this.saveData():this.notification.openSnackBar("Por favor ingresa al menos una fecha de una conversi\xf3n","snackbar-warning")}saveData(){var t;null===(t=this.formAttendance.get("dateMeeting"))||void 0===t||t.setValue((0,D.p)()),this.d12Srvc.saveAttendance(this.formAttendance.value).pipe((0,p.q)(1)).subscribe({next:a=>{a.message===r.Z.STATUS.messageOk&&(this.notification.openSnackBar("Se registro con \xe9xito la asistencia para esta reuni\xf3n","snackbar-success"),this.route.navigate(["/","d-12","my-discipleship-attendence"]))},error:a=>{this.route.navigate(["/","d-12","register-attendance-d12",this.idRegister]),this.notification.openSnackBar("Ah ocurrido un error al guardar la asistencia, intenta m\xe1s tarde","snackbar-danger")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(T),e.Y36(g.gz),e.Y36(A.c),e.Y36(M.n),e.Y36(l.qu),e.Y36(R.uw),e.Y36(L.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-attendance"]],decls:3,vars:2,consts:[[1,"card-container"],[4,"ngIf"],[1,"title-lists"],[1,"txt-end","txt-secondary"],["errorTailor","",3,"formGroup"],["class","form-group m-1",4,"ngIf"],[1,"txt-center","p-1"],[3,"configTable"],["formArrayName","guests",4,"ngFor","ngForOf"],[1,"form-group"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"mb-1"],[1,"form-attendence"],["for","typeMeeting",1,"label-form"],["placeholder","Seleccionar una opci\xf3n","formControlName","typeMeeting","controlErrorsClass","danger",1,"input-form"],[3,"value",4,"ngFor","ngForOf"],["for","offering",1,"label-form"],["type","text","placeholder","Monto","formControlName","offering","controlErrorsClass","danger","prefix","Q.","mask","separator.2","decimalMarker",".","thousandSeparator",",",1,"input-form"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"form-group","m-1"],["for","dayMeeting",1,"label-form"],["placeholder","Seleccionar una opci\xf3n","formControlName","idLeader","controlErrorsClass","danger",1,"input-form"],[3,"value"],["formArrayName","guests"],[1,"form-guest",3,"formArrayName"],["for","nameGuest",1,"label-table-guest","label-form-guest"],[1,"m-1"],["type","text","placeholder","Nombre completo","formControlName","nameGuest","controlErrorsClass","danger",1,"input-form"],["for","phoneGuest",1,"label-table-guest","label-form-guest"],["type","text","placeholder","Tel\xe9fono","formControlName","phoneGuest","controlErrorsClass","danger","prefix","(502) ","mask","0000 - 0000",1,"input-form"],["for","emailGuest",1,"label-table-guest","label-form-guest"],["type","text","placeholder","Correo","formControlName","emailGuest","controlErrorsClass","danger",1,"input-form"],[1,"label-table-guest","label-form-guest"],[1,"td-guest-attendence"],["formControlName","attendenceGuest",1,"ml-1"],["type","button",1,"btn","p-0",3,"click"],["formArrayName","attendance",4,"ngFor","ngForOf"],[1,"form-group","txt-end"],["formArrayName","attendance"],[1,"txt-center"],[1,"label-table-guest"],[3,"formArrayName"],[1,"main-form-group"],["for","name",1,"label-form"],["controlErrorsClass","danger",1,"input-form"],["for","convertToCrist",1,"label-form"],["type","date","placeholder","Tel\xe9fono","formControlName","convertToCrist","controlErrorsClass","danger",1,"input-form"],["for","nameGuest",1,"label-form"],["for","convertToCristGuest",1,"label-form"],["type","date","placeholder","Tel\xe9fono","formControlName","convertToCristGuest","controlErrorsClass","danger",1,"input-form"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,z,32,6,"ng-container",1),e.YNc(2,ee,12,4,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!a.converts),e.xp6(1),e.Q6J("ngIf",a.converts))},directives:[v.O5,l._Y,l.JL,h.m6,l.sg,h.kH,F.gD,l.JJ,l.u,v.sg,P.ey,_.Q,l.CE,l.Fj,O.hx,G.oG,Y.Hw,U.d],encapsulation:2,data:{animation:[(0,Z.X$)("detailExpand",[(0,Z.SB)("collapsed",(0,Z.oB)({height:"0px",minHeight:"0"})),(0,Z.SB)("expanded",(0,Z.oB)({height:"*"})),(0,Z.eR)("expanded <=> collapsed",(0,Z.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),n})();var ae=c(1884),ie=c(8372),ne=c(9300),se=c(3900),re=c(3062),N=c(1079);function oe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",14),e.NdJ("onSelectionChange",function(){const s=e.CHM(t).$implicit;return e.oxw().onSelecetedMember(s)}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function le(n,o){1&n&&(e.TgZ(0,"div",15)(1,"samp")(2,"strong"),e._uU(3,"Este discipulado tiene 12 o m\xe1s miembros, alerta de capacidad maxima."),e.qZA()()())}let de=(()=>{class n{constructor(t,a,i,s,d,u,m,b){var y,x;this.builderForm=t,this.route=a,this.registerSrvc=i,this.notification=s,this.activeRoute=d,this.dialog=u,this.dataTableSrvc=m,this.d12Srvc=b,this.idRegister=void 0,this.dataTable={data:[],header:["Nombre","Tel","Correo","Eliminar"],next:null,previous:null,count:0,pages:0,limit:15,actualPage:1,isLoadingResults:!1,disabledPointer:!0},this.formAssigment=this.builderForm.group({searchMember:[""],idDiscipleships:["",l.kI.required],newMembers:this.builderForm.array([]),deleteMembers:this.builderForm.array([])}),this.filteredMembers=this.formAssigment.get("searchMember").valueChanges.pipe((0,ae.x)(),(0,ie.b)(1e3),(0,ne.h)(E=>!!E),(0,se.w)(E=>this.registerSrvc.searchMember(E))),this.nameDiscipleship=null===(x=null===(y=this.route.getCurrentNavigation())||void 0===y?void 0:y.extras.state)||void 0===x?void 0:x.nameDiscipleship}ngOnInit(){var t;this.idRegister=this.activeRoute.snapshot.params.id,this.idRegister&&(this.getData(this.idRegister),null===(t=this.formAssigment.get("idDiscipleships"))||void 0===t||t.setValue(this.idRegister)),this.dataTableSrvc.paginationTrigger.subscribe(a=>{switch(a.action){case r.Z.COMMON.NEXTPAGE:this.nextPage();break;case r.Z.COMMON.PREVPAGE:this.prevPage();break;case r.Z.COMMON.GETITEM:break;case r.Z.COMMON.DELETE_ITEM:a.id&&this.onDeleteMember(a.id)}})}get newMembers(){return this.formAssigment.get("newMembers")}get deleteMembers(){return this.formAssigment.get("deleteMembers")}onSelecetedMember(t){var a;const i=this.formAssigment.get("newMembers"),s=i.value.some(u=>u.id===t.id),d=this.dataTable.data.some(u=>u.id===t.id);s||d||(i.push(this.builderForm.group({id:[t.id,[l.kI.required]]})),this.dataTable.data.unshift({id:t.id,name:t.name,cellPhone:t.cellPhone||"--",email:t.email||"--",cellRender:"deleteItem"}),this.dataTable.count=this.dataTable.data.length),null===(a=this.formAssigment.get("searchMember"))||void 0===a||a.reset()}onDeleteMember(t){this.dialog.open(I.z,{data:{title:"Esta seguro realizar la siguiente acci\xf3n",body:"Eliminar a este miembro de este discipulado"}}).afterClosed().subscribe(a=>{if(a){const i=this.formAssigment.get("newMembers"),s=this.formAssigment.get("deleteMembers"),d=i.value.some(u=>u.id===t);d&&i.removeAt(i.value.findIndex(u=>u.id===t)),d||s.push(this.builderForm.group({id:[t,[l.kI.required]]})),this.dataTable.data=this.dataTable.data.filter(u=>u.id!==t),this.dataTable.count=this.dataTable.data.length}})}nextPage(){this.dataTable.actualPage&&this.dataTable.pages&&this.dataTable.actualPage<this.dataTable.pages&&this.idRegister&&(this.dataTable.actualPage=this.dataTable.actualPage+1,this.getData(this.idRegister,this.dataTable.actualPage))}prevPage(){this.dataTable.actualPage&&this.idRegister&&(this.dataTable.actualPage=this.dataTable.actualPage-1==0?1:this.dataTable.actualPage-1,this.getData(this.idRegister,this.dataTable.actualPage))}getData(t,a,i){this.dataTable.isLoadingResults=!0,this.d12Srvc.getgetMyAssigment(t).pipe((0,p.q)(1)).subscribe({next:s=>{this.dataTable.isLoadingResults=!1,this.dataTable.data=s.data,this.dataTable.next=s.next,this.dataTable.previous=s.previous,this.dataTable.pages=s.pages,this.dataTable.count=s.total},error:s=>{this.dataTable.isLoadingResults=!1,this.route.navigate(["/","d-12","register-assigment",this.idRegister]),this.notification.openSnackBar("A ocurrido un error al intentar obtener los datos","snackbar-danger")}})}onSubmmit(){this.d12Srvc.createAssigment(this.formAssigment.value).subscribe({next:t=>{t.message===r.Z.STATUS.messageOk&&(this.notification.openSnackBar("Se a creado la asignaci\xf3n con \xe9xito"),this.formAssigment.reset(),this.route.navigate(["/","d-12","my-discipleship"]))},error:t=>{this.route.navigate(["/","d-12","register-assigment",this.idRegister]),this.notification.openSnackBar("A ocurrido un error al intentar crear la asignaci\xf3n","snackbar-danger")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(g.F0),e.Y36(re.a),e.Y36(A.c),e.Y36(g.gz),e.Y36(R.uw),e.Y36(M.n),e.Y36(T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-assignment"]],decls:24,vars:9,consts:[[1,"card-container"],[1,"title-lists"],[1,"txt-end","txt-secondary"],["errorTailor","",3,"formGroup"],[1,"form-group","ml-2","mr-2"],["for","txtSearch",1,"label-form"],["type","text","placeholder","Buscar miembro...","formControlName","searchMember","controlErrorsClass","danger",1,"input-form",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[1,"txt-center","p-1"],["class","txt-center pb-2 danger",4,"ngIf"],[3,"configTable"],[1,"form-group","txt-end"],[1,"btn","btn-primary","m-1",3,"disabled","click"],[3,"value","onSelectionChange"],[1,"txt-center","pb-2","danger"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Asigna un miembro a tu discipulado"),e.qZA(),e.TgZ(4,"h3",2),e._uU(5),e.qZA()(),e.TgZ(6,"form",3)(7,"div",4)(8,"label",5),e._uU(9,"Seleccionar un miembro:"),e.qZA(),e._UZ(10,"input",6),e.TgZ(11,"mat-autocomplete",null,7),e.YNc(13,oe,2,2,"mat-option",8),e.ALo(14,"async"),e.qZA()(),e.TgZ(15,"div",9)(16,"h3"),e._uU(17,"Miembros de este discipulado"),e.qZA()(),e.YNc(18,le,4,0,"div",10),e._UZ(19,"app-data-table",11),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return a.onSubmmit()}),e._uU(22,"Guardar Cambios "),e.qZA()()()(),e._uU(23,'\n"')),2&t){const i=e.MAs(12);e.xp6(5),e.Oqu(a.nameDiscipleship),e.xp6(1),e.Q6J("formGroup",a.formAssigment),e.xp6(4),e.Q6J("matAutocomplete",i),e.xp6(3),e.Q6J("ngForOf",e.lcZ(14,7,a.filteredMembers)),e.xp6(5),e.Q6J("ngIf",(a.dataTable.count||0)>=12),e.xp6(1),e.Q6J("configTable",a.dataTable),e.xp6(2),e.Q6J("disabled",0===a.newMembers.length&&0===a.deleteMembers.length)}},directives:[l._Y,l.JL,h.m6,l.sg,h.kH,l.Fj,N.ZL,l.JJ,l.u,N.XC,v.sg,P.ey,v.O5,_.Q],pipes:[v.Ov],encapsulation:2}),n})(),ce=(()=>{class n{constructor(t,a,i,s){var d,u;this.route=t,this.d12Srvc=a,this.activeRoute=i,this.notification=s,this.dataTable={data:[],header:["Nombre","Fecha","Tipo de reuni\xf3n","Tipo de discipulado","Hora"],next:null,previous:null,count:0,pages:0,limit:20,actualPage:1,isLoadingResults:!1,disabledPointer:!0},this.typeDiscipleship="",this.nameDiscipleship=null===(u=null===(d=this.route.getCurrentNavigation())||void 0===d?void 0:d.extras.state)||void 0===u?void 0:u.nameDiscipleship}ngOnInit(){this.idRegister=this.activeRoute.snapshot.params.id,this.idRegister&&this.getData()}redirectAttendance(){var t,a;switch(this.typeDiscipleship){case r.Z.FILLSELECTS.typeDiscipleships[0].value:this.route.navigate(["/","d-12","register-attendance-d12",this.idRegister],{state:{nameDiscipleship:null===(t=this.dataTable.data[0])||void 0===t?void 0:t.nameDiscipleship}});break;case r.Z.FILLSELECTS.typeDiscipleships[1].value:this.route.navigate(["/","d-12","register-attendance-action-group",this.idRegister],{state:{nameDiscipleship:null===(a=this.dataTable.data[0])||void 0===a?void 0:a.nameDiscipleship}})}}nextPage(){this.dataTable.actualPage&&this.dataTable.pages&&this.dataTable.actualPage<this.dataTable.pages&&(this.dataTable.actualPage=this.dataTable.actualPage+1,this.getData(this.dataTable.actualPage))}prevPage(){this.dataTable.actualPage&&(this.dataTable.actualPage=this.dataTable.actualPage-1==0?1:this.dataTable.actualPage-1,this.getData(this.dataTable.actualPage))}getData(t,a){this.d12Srvc.getMeetings(t,a,this.idRegister).subscribe({next:i=>{var s,d;switch(this.dataTable.isLoadingResults=!1,this.dataTable.data=i.data,this.dataTable.next=i.next,this.dataTable.previous=i.previous,this.dataTable.pages=i.pages,this.dataTable.count=i.total,this.dataDiscipleship=i.discipleship,this.dataDiscipleship.meetingFrequency=null===(s=r.Z.FILLSELECTS.typeMeetingFrequency.find(u=>u.value===this.dataDiscipleship.meetingFrequency))||void 0===s?void 0:s.viewValue,this.dataDiscipleship.dayMeeting=null===(d=r.Z.FILLSELECTS.dayOfWeek.find(u=>u.value===this.dataDiscipleship.dayMeeting))||void 0===d?void 0:d.viewValue,this.typeDiscipleship=this.dataDiscipleship.typeDiscipleship,this.dataDiscipleship.typeDiscipleship){case r.Z.FILLSELECTS.typeDiscipleships[0].value:this.dataDiscipleship.typeDiscipleship=r.Z.FILLSELECTS.typeDiscipleships[0].viewValue;break;case r.Z.FILLSELECTS.typeDiscipleships[1].value:this.dataDiscipleship.typeDiscipleship=r.Z.FILLSELECTS.typeDiscipleships[1].viewValue}},error:i=>{console.error(i),this.route.navigate(["/","d-12","meeting",this.idRegister]),this.notification.openSnackBar("A ocurrido un error al listar sus reuniones, intenta m\xe1s tarde","snackbar-danger")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.F0),e.Y36(T),e.Y36(g.gz),e.Y36(A.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-meeting"]],decls:29,vars:6,consts:[[1,"card-container"],[1,"txt-center"],[1,"txt-center","m-1","color-alert"],[1,"next-meeting","m-1"],[1,"contain-meeeting"],[1,"contain-next-meeting"],[1,"p-item-meeting"],[1,"txt-center","m-1"],[1,"btn","btn-outline-primary",3,"click"],[3,"configTable"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"h3",2),e._uU(4,"Proxima reuni\xf3n"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"span",6),e._uU(9,"Frecuencia: "),e.TgZ(10,"strong"),e._uU(11),e.qZA()(),e.TgZ(12,"span",6),e._uU(13,"Hora: "),e.TgZ(14,"strong"),e._uU(15),e.qZA()(),e.TgZ(16,"span",6),e._uU(17,"Dia: "),e.TgZ(18,"strong"),e._uU(19),e.qZA()(),e.TgZ(20,"span",6),e._uU(21,"Tipo: "),e.TgZ(22,"strong"),e._uU(23),e.qZA()()(),e.TgZ(24,"div",7)(25,"button",8),e.NdJ("click",function(){return a.redirectAttendance()}),e._uU(26,"Registrar asistencia"),e.qZA()()()(),e.TgZ(27,"div"),e._UZ(28,"app-data-table",9),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(null==a.dataDiscipleship?null:a.dataDiscipleship.name),e.xp6(9),e.Oqu(null==a.dataDiscipleship?null:a.dataDiscipleship.meetingFrequency),e.xp6(4),e.hij("",null==a.dataDiscipleship?null:a.dataDiscipleship.hourMeeting," Hrs."),e.xp6(4),e.Oqu(null==a.dataDiscipleship?null:a.dataDiscipleship.dayMeeting),e.xp6(4),e.Oqu(null==a.dataDiscipleship?null:a.dataDiscipleship.typeDiscipleship),e.xp6(5),e.Q6J("configTable",a.dataTable))},directives:[_.Q],styles:['.contain-history-meeting[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;margin-left:1em;margin-right:1em}.item-history-meeting[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:stretch;padding:1em 1em 1em 2em;min-width:100%;min-height:4em;border:1px solid #1eb88a;border-radius:.5em;margin:.5em;background-color:azure}.next-meeting[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:space-around;align-items:center}.contain-meeeting[_ngcontent-%COMP%]{padding:1em 1em 1em 2em;min-height:4em;border:1px solid #398bf7;border-radius:.5em;margin:.5em}.contain-next-meeting[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;align-items:stretch}.item-history-meeting[_ngcontent-%COMP%]:before{content:"";width:5px;min-height:8%;margin-left:-1.2em;background:#1eb88a!important;position:absolute}.p-item-meeting[_ngcontent-%COMP%]{padding:.2em}.color-alert[_ngcontent-%COMP%]{color:#ef5350}@media only screen and (min-width: 768px){.item-history-meeting[_ngcontent-%COMP%]{min-width:30em}}']}),n})();var C=c(3395);function ue(n,o){if(1&n&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.viewValue," ")}}function ge(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"label",15),e._uU(2,"Seleccionar el lider al que desea registrar su asistencia *"),e.qZA(),e.TgZ(3,"mat-select",16),e.YNc(4,ue,2,2,"mat-option",17),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.selectLeaders)}}function pe(n,o){1&n&&e._UZ(0,"mat-divider")}const he=[{path:"",redirectTo:"my-discipleship",pathMatch:"full"},{path:"my-discipleship",data:{title:"Listado de Mienbros",role:[r.Z.ROLES.LEADER]},component:Q,canActivate:[C.F,f.x]},{path:"register-assigment/:id",data:{title:"Listado de Mienbros",role:[r.Z.ROLES.LEADER]},component:de,canActivate:[C.F,f.x]},{path:"meeting/:id",data:{title:"Reuniones",role:[r.Z.ROLES.LEADER,r.Z.ROLES.ADMIN,r.Z.ROLES.REGISTER]},component:ce,canActivate:[C.F,f.x]},{path:"my-discipleship-attendence",data:{title:"Listado de Asistencia",role:[r.Z.ROLES.ADMIN,r.Z.ROLES.REGISTER,r.Z.ROLES.LEADER]},component:$,canActivate:[C.F,f.x]},{path:"register-attendance-d12/:id",data:{title:"Registrar asistencia D 12",role:[r.Z.ROLES.LEADER,r.Z.ROLES.ADMIN,r.Z.ROLES.REGISTER]},component:te,canActivate:[C.F,f.x]},{path:"register-attendance-action-group/:id",data:{title:"Registrar asistencia D 12",role:[r.Z.ROLES.LEADER,r.Z.ROLES.ADMIN,r.Z.ROLES.REGISTER]},component:(()=>{class n{constructor(t,a,i,s,d,u){this.formBuilder=t,this.notification=a,this.route=i,this.d12Srvc=s,this.activeRoute=d,this.authService=u,this.idRegister=this.activeRoute.snapshot.params.id,this.formAttendance=this.formBuilder.group({idDiscipleship:["",l.kI.required],attendancesCount:["",l.kI.required],guestsCount:[""],convertsCount:[""],reconciledCount:[""],dateMeeting:[""],typeDiscipleship:["actionGroup",l.kI.required],idLeader:["",l.kI.required]}),this.selectLeaders=[],this.currentUser=this.authService.getUser(),this.canRegisterAttendance=this.currentUser&&this.currentUser.role.some(m=>m===r.Z.ROLES.ADMIN||m===r.Z.ROLES.REGISTER)}ngOnInit(){var t;null===(t=this.formAttendance.get("idDiscipleship"))||void 0===t||t.setValue(this.idRegister),this.d12Srvc.getDataDiscipleship(this.idRegister).pipe((0,p.q)(1)).subscribe({next:a=>{a.leaders&&a.leaders.length>0&&(this.selectLeaders=a.leaders.map(i=>({value:i.id,viewValue:i.name})))},error:a=>{this.notification.openSnackBar("Ha ocurrido un error intente m\xe1s tarde","snackbar-danger"),this.route.navigate(["/","d-12","register-attendance-action-group",this.idRegister])}})}onSubmmit(){var t,a,i;this.canRegisterAttendance||null===(t=this.formAttendance.get("idLeader"))||void 0===t||t.setValue(null===(a=this.currentUser)||void 0===a?void 0:a.idMember),this.formAttendance.valid&&(null===(i=this.formAttendance.get("dateMeeting"))||void 0===i||i.setValue((0,D.p)()),this.d12Srvc.saveAttendance(this.formAttendance.value).pipe((0,p.q)(1)).subscribe({next:s=>{s.message===r.Z.STATUS.messageOk&&(this.notification.openSnackBar("Se registro con \xe9xito la asistencia para esta reuni\xf3n","snackbar-success"),this.route.navigate(["/","d-12","my-discipleship-attendence"]))},error:s=>{this.route.navigate(["/","d-12","register-attendance-action-group",this.idRegister]),this.notification.openSnackBar("Ah ocurrido un error al guardar la asistencia, intenta m\xe1s tarde","snackbar-danger")}}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(A.c),e.Y36(g.F0),e.Y36(T),e.Y36(g.gz),e.Y36(L.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-attendance-action-group"]],decls:28,vars:3,consts:[[1,"card-container"],[1,"title-lists"],["errorTailor","",1,"m-1",3,"formGroup"],["class","form-group",4,"ngIf"],[4,"ngIf"],[1,"main-form-group"],[1,"form-group"],["for","name",1,"label-form"],["type","text","id","name","placeholder","\xbfC\xfaantos asistieri\xf3n a la reuni\xf3n?","formControlName","attendancesCount","controlErrorsClass","danger","mask","0*",1,"input-form"],["for","description",1,"label-form"],["type","text","id","name","placeholder","\xbfC\xfaantos invitados hubieron?","formControlName","guestsCount","controlErrorsClass","danger","mask","0*",1,"input-form"],["type","text","id","name","placeholder","\xbfC\xfaantos convertidos hubieron?","formControlName","convertsCount","controlErrorsClass","danger","mask","0*",1,"input-form"],["type","text","id","name","placeholder","\xbfCuantos reconciliados hubierion?","formControlName","reconciledCount","controlErrorsClass","danger","mask","0*",1,"input-form"],[1,"form-group","txt-end"],[1,"btn","btn-primary","m-1",3,"click"],["for","dayMeeting",1,"label-form","txt-prymary"],["placeholder","Seleccionar una opci\xf3n","formControlName","idLeader","controlErrorsClass","danger",1,"input-form"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Registrar asistencia"),e.qZA()(),e.TgZ(4,"form",2),e.YNc(5,ge,5,1,"div",3),e.YNc(6,pe,1,0,"mat-divider",4),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"\xbfC\xfaantos asistier\xf3n? *"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",6)(13,"label",9),e._uU(14,"\xbfC\xfaantos invitados?"),e.qZA(),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",5)(17,"div",6)(18,"label",7),e._uU(19,"\xbfC\xfaantos convertidos? *"),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",6)(22,"label",9),e._uU(23,"\xbfC\xfaantos reconciliados?"),e.qZA(),e._UZ(24,"input",12),e.qZA()(),e.TgZ(25,"div",13)(26,"button",14),e.NdJ("click",function(){return a.onSubmmit()}),e._uU(27,"Registrar asistencia "),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",a.formAttendance),e.xp6(1),e.Q6J("ngIf",a.canRegisterAttendance),e.xp6(1),e.Q6J("ngIf",a.canRegisterAttendance))},directives:[l._Y,l.JL,h.m6,l.sg,h.kH,v.O5,F.gD,l.JJ,l.u,v.sg,P.ey,U.d,l.Fj,O.hx],encapsulation:2}),n})(),canActivate:[C.F,f.x]},{path:"history-meetings",data:{title:"Lsitado de Reuniones",role:[r.Z.ROLES.ADMIN,r.Z.ROLES.REGISTER]},component:H,canActivate:[C.F,f.x]}];var be=c(3606),ve=c(2061),fe=c(773);let Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.ez,g.Bz.forChild(he),be.N,N.Bb,l.u5,l.UX,F.LD,G.p9,Y.Ps,U.t,R.Is,fe.Cq,O.yI.forRoot(),h.OX.forRoot({errors:ve.Z})]]}),n})()}}]);